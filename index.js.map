{"version":3,"sources":["webpack://mesto/./src/scripts/Card.js","webpack://mesto/./src/scripts/Api.js","webpack://mesto/./src/scripts/Section.js","webpack://mesto/./src/scripts/FormValidator.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/scripts/Popup.js","webpack://mesto/./src/scripts/PopupWithForm.js","webpack://mesto/./src/scripts/PopupWithImage.js","webpack://mesto/./src/scripts/PopupWithConfirm.js","webpack://mesto/./src/scripts/UserInfo.js","webpack://mesto/./src/pages/index.js"],"names":["Card","data","templateCard","myId","handleCardClick","handleConfirmClick","handleLikeClick","handleDislike","this","_name","name","_link","link","_id","_myId","_owner","owner","_likes","likes","_template","_handleCardClick","_handleConfirmClick","_handleLikeClick","_handleDislike","document","querySelector","content","cloneNode","_card","_getTemplate","_cardImage","_cardImgName","_likeCard","_deleteCard","_cardCountLike","textContent","src","alt","length","find","like","classList","add","_setEventListeners","remove","toggle","contains","addEventListener","_Liked","Api","baseUrl","userId","headers","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","method","body","JSON","stringify","about","then","getStatus","item","avatar","id","Section","container","renderer","_renderer","_container","items","reverse","forEach","console","log","prepend","validationConfig","formSelector","inputSelector","submitButtonSelector","inputInvalidClass","buttonInvalidClass","FormValidator","form","_config","_form","_inputList","Array","from","querySelectorAll","_submitButton","evt","preventDefault","input","_checkInputValidity","_setButtonState","validity","valid","_hideError","_showError","validationMessage","some","_deactiveInput","disabled","elements","userAvatarBtn","userEditBtn","userAddBtn","popupAvatar","popupEdit","popupAdd","popupImage","popupConfirm","inputName","inputAbout","userAvatar","userName","userAbout","Popup","popup","_popup","_handleEscClose","bind","removeEventListener","key","close","event","target","currentTarget","PopupWithForm","handlerFormSubmit","_handlerFormSubmit","_button","_formValues","value","_getInputValues","reset","text","PopupWithImage","_image","_title","PopupWithConfirm","_btnConfirm","e","_handleConfirm","turn","UserInfo","_user","_description","_avatar","profileConfig","api","authorization","user","all","getUserData","getInitialCards","userData","result","setUserInfo","cardList","renderCards","catch","err","popupFormEditValidator","enableValidation","popupFormAddValidator","popupFormAvatarValidator","popupWithConfirm","popupWithImage","card","open","сonfirmHandler","deleteCard","removeCard","likeCard","likeCounter","likeThatCard","dislikeCard","generateCard","createCard","addItem","popupEditProfile","loadingProgress","setUserData","finally","popupAddCard","popupChangeAvatar","changeAvatar","setUserAvatar","bioUser","getUserInfo","resetValidationState","setEventListeners"],"mappings":"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","file":"index.js","sourcesContent":["//создание класса Card\nexport default class Card {\n    constructor(data, templateCard, myId, { handleCardClick, handleConfirmClick, handleLikeClick, handleDislike }) {\n        this._name = data.name;\n        this._link = data.link;\n        this._id = data._id;\n        this._myId = myId;\n        this._owner = data.owner;\n        this._likes = data.likes;\n        this._template = templateCard;\n        this._handleCardClick = handleCardClick;\n        this._handleConfirmClick = handleConfirmClick;\n        this._handleLikeClick = handleLikeClick;\n        this._handleDislike = handleDislike;\n    }\n\n    //выбор темплейта\n    _getTemplate() {\n        return document\n            .querySelector(this._template)//ищем шаблон \n            .content//content это то что внутри тега template\n            .querySelector(\".element\")//ищем карточку\n            .cloneNode(true);//клонируем именно карточку\n    }\n\n    generateCard() {\n        this._card = this._getTemplate();\n\n        this._cardImage = this._card.querySelector(\".element__image\");\n        this._cardImgName = this._card.querySelector(\".element__title\");\n        this._likeCard = this._card.querySelector(\".element__like\");\n        this._deleteCard = this._card.querySelector(\".element__delete\");\n        this._cardCountLike = this._card.querySelector(\".element__like_counter\");\n\n        this._cardImgName.textContent = this._name;\n        this._cardImage.src = this._link;\n        this._cardImage.alt = this._name;\n        this._cardCountLike.textContent = `${this._likes.length}`;\n\n        if (this._likes.find((like) => like._id === this._myId)) {\n            this._likeCard.classList.add(\"element__like_linked\");\n        }\n\n        if (!(this._owner._id === this._myId)) {\n            this._deleteCard.classList.add('element__delete_active');\n        }\n\n        this._setEventListeners();\n\n        return this._card;\n    }\n\n    removeCard() {\n        this._card.remove();\n        this._card = null;\n    }\n\n    likeThatCard() {\n        this._likeCard.classList.toggle('element__like_linked');\n    };\n\n    _Liked() {\n        if (this._likeCard.classList.contains(\"element__like_linked\")) {\n            this._handleDislike();\n        } else {\n            this._handleLikeClick();\n        }\n        // console.log(this._likeCard)\n    }\n\n    likeCounter(likes) {\n        this._cardCountLike.textContent = likes.length;\n    }\n\n    _setEventListeners() {\n        this._cardImage.addEventListener(\"click\", () => this._handleCardClick());\n        this._likeCard.addEventListener(\"click\", () => this._Liked());\n        this._deleteCard.addEventListener(\"click\", () => this._handleConfirmClick(this._card));\n    }\n}","export default class Api {\r\n  constructor({ baseUrl, userId, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n    this.userId = userId;\r\n  }\r\n\r\n  getStatus(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n    }\r\n  }\r\n\r\n  setUserData(data) {\r\n    return fetch(`${this._baseUrl}/users/me`,\r\n      {\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify(\r\n          {\r\n            name: data.name,\r\n            about: data.about,\r\n          }),\r\n      })\r\n      .then(this.getStatus);\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch(`${this._baseUrl}/users/me`,\r\n      {\r\n        headers: this._headers,\r\n      })\r\n      .then(this.getStatus);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`,\r\n      {\r\n        headers: this._headers,\r\n      })\r\n      .then(this.getStatus);\r\n  }\r\n\r\n  createCard(item) {\r\n    return fetch(`${this._baseUrl}/cards`,\r\n      {\r\n        method: \"POST\",\r\n        headers: this._headers,\r\n\r\n        body: JSON.stringify({\r\n          name: item.name,\r\n          link: item.link,\r\n        }),\r\n      })\r\n      .then(this.getStatus);\r\n  }\r\n\r\n  changeAvatar(avatar) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`,\r\n      {\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar: avatar.avatar,\r\n        }),\r\n      })\r\n      .then(this.getStatus);\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`,\r\n      {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      })\r\n      .then(this.getStatus);\r\n  }\r\n\r\n  likeCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: this._headers,\r\n      }).then(this.getStatus);\r\n  }\r\n\r\n  dislikeCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`,\r\n      {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      })\r\n      .then(this.getStatus);\r\n  }\r\n}","//класс Section, который отвечает за отрисовку элементов на странице\r\n\r\nexport default class Section {\r\n    constructor({ renderer }, container) {\r\n        this._renderer = renderer;\r\n        this._container = container;\r\n\r\n    };\r\n\r\n    renderCards(items) {\r\n        items.reverse().forEach(item => {//первый элемент массива становится последним, а последний — первым.\r\n            this._renderer(item);\r\n        });\r\n    };\r\n\r\n    addItem(item) {\r\n        console.log(this._container);\r\n        this._container.prepend(item);\r\n    };\r\n};","export const validationConfig = {\n    formSelector: '.popup__form',\n    inputSelector: '.popup__input',\n    submitButtonSelector: '.popup__button',\n    inputInvalidClass: 'popup__input_state_invalid',\n    buttonInvalidClass: 'popup__button_invalid'\n};\n\nexport class FormValidator {\n    constructor(form, validationConfig) {\n        this._config = validationConfig;\n        this._form = form;\n        this._inputList = Array.from(this._form.querySelectorAll(this._config.inputSelector));\n        this._submitButton = this._form.querySelector(this._config.submitButtonSelector);\n    }\n\n    enableValidation() {//запускает валидацию\n        //отменяет отправку формы\n        this._form.addEventListener('submit', (evt) => {\n            evt.preventDefault();\n        });\n        this._setEventListeners();\n    };\n\n    _setEventListeners() {\n        this._inputList.forEach((input) => {\n            input.addEventListener('input', () => {\n                this._checkInputValidity(input);\n                this._setButtonState();\n            });\n        });\n    };\n\n    _checkInputValidity(input) {\n        if (!input.validity.valid) {\n            this._showError(input, input.validationMessage);\n        } else {\n            this._hideError(input);\n        }\n    };\n\n\n    _showError(input) {\n        const error = this._form.querySelector(`#${input.id}-error`);\n        error.textContent = input.validationMessage;\n        input.classList.add(this._config.inputInvalidClass);\n    };\n\n    _hideError(input) {\n        const error = this._form.querySelector(`#${input.id}-error`);\n        error.textContent = '';\n        input.classList.remove(this._config.inputInvalidClass);\n        // console.log(input.id)\n    };\n\n    resetValidationState() {\n        this._inputList.forEach((input) => {\n            this._hideError(input);\n        });\n        this._setButtonState();\n    };\n\n    _deactiveInput() {\n        return this._inputList.some((input) => {\n            return !input.validity.valid;\n        });\n    };\n\n    _setButtonState() {\n        if (this._deactiveInput(this._inputList)) {\n            this._submitButton.classList.add(this._config.buttonInvalidClass);\n            this._submitButton.disabled = true;\n        } else {\n            this._submitButton.classList.remove(this._config.buttonInvalidClass);\n            this._submitButton.disabled = false;\n        };\n    };\n\n};","// объявление переменных\r\nexport const elements = document.querySelector('.elements');\r\n\r\n//кнопки попапов\r\nexport const userAvatarBtn = document.querySelector('.profile__image-button');\r\nexport const userEditBtn = document.querySelector('.profile__edit-button');\r\nexport const userAddBtn = document.querySelector('.profile__add-button');\r\n\r\n//попапы\r\nexport const popupAvatar = document.querySelector('.popup_avatar');\r\nexport const popupEdit = document.querySelector('.popup_type_edit');\r\nexport const popupAdd = document.querySelector('.popup_type_add');\r\nexport const popupImage = document.querySelector('.popup_type_image');\r\nexport const popupConfirm = document.querySelector('.popup_confirm');\r\n\r\n//поля юзера\r\nexport const inputName = popupEdit.querySelector(\".popup__input_type_name\");\r\nexport const inputAbout = popupEdit.querySelector(\".popup__input_type_title\");\r\n\r\n//стоковые поля\r\nexport const userAvatar = document.querySelector('.profile__image');\r\nexport const userName = document.querySelector('.profile__name');\r\nexport const userAbout = document.querySelector('.profile__info');\r\n\r\n//поля валидации\r\nexport const formAvatar = popupAvatar.querySelector('.popup__form');\r\nexport const formEdit = popupEdit.querySelector('.popup__form');\r\nexport const formAdd = popupAdd.querySelector('.popup__form');\r\n\r\n","//управление попами\nexport default class Popup {\n    constructor(popup) {\n        this._popup = popup;\n        this._handleEscClose = this._handleEscClose.bind(this);\n    }\n\n    //открыть попап\n    open() {\n        this._popup.classList.add('popup_opened');\n        document.addEventListener('keydown', this._handleEscClose);\n    };\n\n    //закрыть попап\n    close() {\n        this._popup.classList.remove('popup_opened');\n        document.removeEventListener('keydown', this._handleEscClose);\n    };\n    //закрытие по Esc\n    _handleEscClose(evt) {\n        if (evt.key === \"Escape\") {\n            this.close();\n        };\n    };\n\n    setEventListeners() {\n        this._popup.querySelector('.popup__close').addEventListener('click', () => this.close());\n        this._popup.addEventListener(\"click\", (event) => {\n            if (event.target !== event.currentTarget) {\n                return;\n            }\n            this.close();\n        });\n    };\n\n};\n","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n    constructor(popup, { handlerFormSubmit } ) {\r\n        super(popup);\r\n        this._form = this._popup.querySelector('.popup__form');\r\n        this._handlerFormSubmit = handlerFormSubmit;\r\n        this._button = this._form.querySelector('.popup__button');\r\n        this._inputList = Array.from(this._popup.querySelectorAll('.popup__input'));//выбирает все поля ввода текущего попапа\r\n    };\r\n\r\n    _getInputValues() {\r\n        this._formValues = {};\r\n        this._inputList.forEach((input) => {\r\n            this._formValues[input.name] = input.value;\r\n        });\r\n        return this._formValues;\r\n    };\r\n\r\n    setEventListeners() {\r\n        super.setEventListeners();\r\n        this._form.addEventListener('submit', (evt) => {\r\n            evt.preventDefault();\r\n            this._handlerFormSubmit(this._getInputValues());\r\n        });\r\n    }\r\n\r\n    close() {\r\n        super.close();\r\n        this._form.reset(); //сброс формы\r\n    };\r\n\r\n    loadingProgress(text) {\r\n        this._button.textContent = text;\r\n    };\r\n};\r\n","import Popup from './Popup.js';\r\n\r\n//попап открытия картинки\r\nexport default class PopupWithImage extends Popup {\r\n    constructor(popup) {\r\n        super(popup);\r\n        this._image = this._popup.querySelector('.popup__image-big');\r\n        this._title = this._popup.querySelector('.popup__image-title');\r\n    };\r\n\r\n    open(name, link) {\r\n        super.open();\r\n        this._image.src = link;\r\n        this._image.alt = name;\r\n        this._title.textContent = name;\r\n    };\r\n};","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithConfirm extends Popup {\r\n  constructor(popup) {\r\n    super(popup);\r\n    this._btnConfirm = this._popup.querySelector(\".popup__button\");\r\n  }\r\n\r\n  setEventListeners() {\r\n    this._btnConfirm.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      this._handleConfirm();\r\n      this.close();\r\n    });\r\n    super.setEventListeners();\r\n  }\r\n\r\n  сonfirmHandler(turn) {\r\n    this._handleConfirm = turn;\r\n  }\r\n}","//Класс UserInfo отвечает за управление отображением информации о пользователе на странице\r\nexport default class UserInfo {\r\n    constructor({ name, about, avatar }) {\r\n        this._user = name;\r\n        this._description = about;\r\n        this._avatar = avatar;\r\n    };\r\n\r\n    getUserInfo() {\r\n        return {\r\n            name: this._user.textContent,\r\n            about: this._description.textContent,\r\n            avatar: this._avatar.src\r\n        };\r\n    };\r\n\r\n    setUserAvatar(data) {\r\n        this._avatar.src = data.avatar;\r\n      }\r\n\r\n    setUserInfo(data) {\r\n        this._user.textContent = data.name;\r\n        this._description.textContent = data.about;\r\n        this._avatar.src = data.avatar;\r\n    };\r\n};","import './index.css';\nimport Card from '../scripts/Card.js';\nimport Api from '../scripts/Api.js';\nimport Section from '../scripts/Section.js';\nimport { FormValidator, validationConfig } from '../scripts/FormValidator.js';\nimport {\n  elements,\n  userAvatarBtn,\n  userEditBtn,\n  userAddBtn,\n  popupAvatar,\n  popupEdit,\n  popupAdd,\n  popupImage,\n  popupConfirm,\n  inputName,\n  inputAbout,\n  userAvatar,\n  userName,\n  userAbout\n} from '../utils/constants.js';\nimport PopupWithForm from '../scripts/PopupWithForm.js';\nimport PopupWithImage from '../scripts/PopupWithImage.js';\nimport PopupWithConfirm from '../scripts/PopupWithConfirm.js';\nimport UserInfo from '../scripts/UserInfo.js';\n\nexport const apiConfig = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19',\n  // userId: '486f4cfdd86508efc4a3eb06',// сервер не работал. убрана привязка по id\n  headers: {\n    authorization: '1d464b43-9695-4331-8a3a-49b913826759',\n    'Content-Type': 'application/json'\n  }\n}\n\nexport const profileConfig = {\n  name: userName,\n  about: userAbout,\n  avatar: userAvatar\n}\n\nlet myId;//подгружаем с сервера в 50-й строке\n\nconst api = new Api(apiConfig);\nconst user = new UserInfo(profileConfig);\n\nPromise.all([api.getUserData(),\napi.getInitialCards()])\n  .then(([userData, result]) => {\n    myId = userData._id\n    user.setUserInfo(userData);\n    cardList.renderCards(result);\n  })\n  .catch((err) => console.log(err));\n\n\n//валидация\nconst popupFormEditValidator = new FormValidator(popupEdit, validationConfig);\npopupFormEditValidator.enableValidation();\nconst popupFormAddValidator = new FormValidator(popupAdd, validationConfig);\npopupFormAddValidator.enableValidation();\nconst popupFormAvatarValidator = new FormValidator(popupAvatar, validationConfig);\npopupFormAvatarValidator.enableValidation();\n\nconst popupWithConfirm = new PopupWithConfirm(popupConfirm);\nconst popupWithImage = new PopupWithImage(popupImage);\n\n// отрисовка элементов.. массив\n\nfunction renderCards(item) {//отдельная функция для рендеринга. можно настроить порядок отрисовки\n  const card = createCard(item)\n  cardList.addItem(card);\n};\n\nfunction createCard(item) {//отдельная функция для создания новой карточки. возвращает готовую карточку\n  const card = new Card(item, \"#element-template\", myId, {\n    handleCardClick: () => {\n      popupWithImage.open(item.name, item.link);\n    },\n    handleConfirmClick: () => {\n      popupWithConfirm.open();\n      popupWithConfirm.сonfirmHandler(() => {\n        api\n          .deleteCard(card._id)\n          .then(() => {\n            card.removeCard();\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      });\n    },\n    handleLikeClick: () => {\n      api\n        .likeCard(item._id)\n        .then((item) => {\n          card.likeCounter(item.likes);\n          card.likeThatCard();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    handleDislike: () => {\n      api\n        .dislikeCard(item._id)\n        .then((item) => {\n          card.likeCounter(item.likes);\n          card.likeThatCard();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  });\n  return card.generateCard();\n};\n\n\n\nconst cardList = new Section({ renderer: (item) => renderCards(item) }, elements);\n\n//смена имени пользователя\nconst popupEditProfile = new PopupWithForm(popupEdit, {\n  handlerFormSubmit: (item) => {\n    popupEditProfile.loadingProgress('Сохранение...')\n    api\n      .setUserData(item)\n      .then((result) => {\n        user.setUserInfo(result);\n        popupEditProfile.close();\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => {\n        popupEditProfile.loadingProgress('Сохранить')\n      })\n  },\n});\n\n//добавление карточки\nconst popupAddCard = new PopupWithForm(popupAdd, {\n  handlerFormSubmit: (item) => {\n    popupAddCard.loadingProgress('Сохранение...')\n    api\n      .createCard(item)\n      .then((item) => {\n        renderCards(item);\n        popupAddCard.close();\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => {\n        popupAddCard.loadingProgress('Создать')\n      })\n  },\n});\n\n//смена аватарки\nconst popupChangeAvatar = new PopupWithForm(popupAvatar, {\n  handlerFormSubmit: (item) => {\n    popupChangeAvatar.loadingProgress('Сохранение...')\n    api\n      .changeAvatar(item)\n      .then((data) => {\n        user.setUserAvatar(data);\n        popupChangeAvatar.close();\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => {\n        popupChangeAvatar.loadingProgress('Сохранить')\n      })\n  },\n});\n\nuserEditBtn.addEventListener(\"click\", () => {\n  const bioUser = user.getUserInfo();\n  inputName.value = bioUser.name;\n  inputAbout.value = bioUser.about;\n\n  popupEditProfile.open();\n  popupFormEditValidator.resetValidationState();\n});\n\nuserAddBtn.addEventListener(\"click\", () => {\n  popupAddCard.open();\n  popupFormAddValidator.resetValidationState();\n});\n\nuserAvatarBtn.addEventListener(\"click\", () => {\n  popupChangeAvatar.open();\n  popupFormAvatarValidator.resetValidationState();\n});\n\npopupChangeAvatar.setEventListeners();\npopupEditProfile.setEventListeners();\npopupAddCard.setEventListeners();\npopupWithImage.setEventListeners();\npopupWithConfirm.setEventListeners();"],"sourceRoot":""}